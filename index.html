<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Memory Game</title>
<style>
    body {
        font-family: Arial, sans-serif;
        text-align: center;
        background: #222;
        color: white;
    }
    h1 {
        margin-top: 20px;
    }
    .game-board {
        display: grid;
        grid-template-columns: repeat(2, 150px);
        grid-gap: 15px;
        justify-content: center;
        margin-top: 30px;
    }
    .btn {
        width: 150px;
        height: 150px;
        border-radius: 15px;
        cursor: pointer;
        opacity: 0.8;
        transition: opacity 0.2s ease;
    }
    .btn:active {
        opacity: 1;
    }
    #green { background-color: green; }
    #red { background-color: red; }
    #yellow { background-color: yellow; }
    #blue { background-color: blue; }
    .active {
        opacity: 1 !important;
        box-shadow: 0 0 20px white;
    }
    button {
        margin-top: 20px;
        padding: 10px 20px;
        font-size: 16px;
        cursor: pointer;
    }
</style>
</head>
<body>

<h1>Memory Game</h1>
<p>Watch the pattern and repeat it!</p>
<div class="game-board">
    <div class="btn" id="green"></div>
    <div class="btn" id="red"></div>
    <div class="btn" id="yellow"></div>
    <div class="btn" id="blue"></div>
</div>

<button id="startBtn">Start Game</button>
<h2 id="level-title">Level: 0</h2>

<script>
    const buttonColors = ["green", "red", "yellow", "blue"];
    let gamePattern = [];
    let userPattern = [];
    let level = 0;
    let started = false;

    const startBtn = document.getElementById("startBtn");
    const levelTitle = document.getElementById("level-title");

    startBtn.addEventListener("click", startGame);

    function startGame() {
        level = 0;
        gamePattern = [];
        started = true;
        nextSequence();
    }

    function nextSequence() {
        userPattern = [];
        level++;
        levelTitle.textContent = "Level: " + level;

        const randomColor = buttonColors[Math.floor(Math.random() * 4)];
        gamePattern.push(randomColor);

        playPattern();
    }

    function playPattern() {
        let delay = 0;
        gamePattern.forEach((color, index) => {
            setTimeout(() => {
                animatePress(color);
            }, delay);
            delay += 600;
        });
    }

    function animatePress(color) {
        const button = document.getElementById(color);
        button.classList.add("active");
        setTimeout(() => {
            button.classList.remove("active");
        }, 300);
    }

    document.querySelectorAll(".btn").forEach(btn => {
        btn.addEventListener("click", function() {
            if (!started) return;

            const userChosenColor = this.id;
            userPattern.push(userChosenColor);
            animatePress(userChosenColor);

            checkAnswer(userPattern.length - 1);
        });
    });

    function checkAnswer(currentLevel) {
        if (userPattern[currentLevel] === gamePattern[currentLevel]) {
            if (userPattern.length === gamePattern.length) {
                setTimeout(nextSequence, 1000);
            }
        } else {
            levelTitle.textContent = "Game Over! Click Start to Try Again";
            started = false;
            flashScreen();
        }
    }

    function flashScreen() {
        document.body.style.backgroundColor = "red";
        setTimeout(() => {
            document.body.style.backgroundColor = "#222";
        }, 300);
    }
</script>

</body>
</html>
